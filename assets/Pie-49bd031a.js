import{b as G,t as q,i as se,S as J,c as ne,r as ie,u as ue}from"./xlsx-20bc10ae.js";import{D as de}from"./DetailHeader-47695dd5.js";import{d as re,l as ce,M as o,o as me,r,b as ve,c as fe,h as t,f as i,w as a,i as s,O as pe,p as _e,k as xe,_ as he}from"./index-17477c0a.js";const we=S=>(_e("data-v-8ba35757"),S=S(),xe(),S),ge={class:"flex flex-col mt-3 flex-1"},be={class:"p-4 rounded-2xl flex"},Ve={class:"w-4/6"},Ce={class:"flex flex-row-reverse mb-4"},ye=we(()=>i("div",{class:"flex justify-center items-center max-h-[500px] max-w-[1000px] overflow-auto"},[i("div",{id:"main",class:"bg-white"})],-1)),ke={class:"w-2/6 bg-white ml-3 rounded-lg p-3"},Se={class:"mb-3"},De={class:"flex items-center ml-1"},Ue={class:"flex w-full"},Ee={class:"flex"},Te={class:"flex mt-3"},$e={class:"flex"},ze={class:"flex"},Be={class:"flex"},Oe={class:"flex"},Pe={class:"flex"},Ae={class:"flex"},Ie={class:"flex"},Fe=re({__name:"Pie",setup(S){const L=ce({title:"饼图"}),B=o(),m=o(),D=o(),j=o(1),O=o(100),U=o(720),E=o(400),P=o("1"),X=o("#5470c6"),T=o("center"),$=o("Tools-Web"),z=o("在线图表制作工具"),A=o(!0),I=o(!0),F=o(!1),R=o("Tools-Web"),Y=()=>{let u=document.createElement("canvas"),e=u.getContext("2d");return u.width=u.height=100,e.textAlign="center",e.textBaseline="middle",e.globalAlpha=.08,e.font="20px Microsoft Yahei",e.translate(50,50),e.rotate(-Math.PI/4),e.fillText(R.value,0,0),u},d=u=>{var c,n,v,f,p;let e=B.value;switch(u){case"scale":let w=O.value/100;e.style.transform=`scale(${w})`;break;case"size":e.style.width=U.value+"px",e.style.height=E.value+"px",H();break;case"title":let h="",_="";A.value===!0&&(h=$.value),I.value===!0&&(_=z.value),(c=m.value)==null||c.setOption({title:{text:h,subtext:_,left:T.value}});break;case"color":(n=m.value)==null||n.setOption({series:[{itemStyle:{color:X.value}}]});break;case"watermark":F.value===!0?(v=m.value)==null||v.setOption({backgroundColor:{image:Y()}}):(f=m.value)==null||f.setOption({backgroundColor:"#fff"});break;case"data":(p=m.value)==null||p.setOption({series:[{data:y.value}]});break}},K=()=>{},V=o(["Search Engine","Direct","Email","Union Ads","Video Ads"]),C=o([1048,735,580,484,300]),y=o([]),Q={backgroundColor:"#fff",title:{text:$.value,subtext:z.value,left:T.value},series:[{type:"pie",radius:"50%",data:y.value,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],tooltip:{}},H=()=>{m.value=se(B.value),m.value.clear(),m.value.resize({width:U.value,height:E.value}),m.value.setOption(Q),d("data")},Z=()=>{var n;let u=P.value=="1"?"png":"jpeg",e=(n=m.value)==null?void 0:n.getDataURL({type:u,pixelRatio:2});if(e!=null){var c=document.createElement("a");c.href=e,c.download="echart."+u,c.click()}},k=o(!1),M=o({}),ee=()=>{k.value==!0?k.value=!1:(k.value=!0,J.locale("zh-cn",window.x_spreadsheet.$messages["zh-cn"]),new J("#x-spreadsheet",{showToolbar:!1,showBottomBar:!1,view:{height:()=>document.documentElement.clientHeight/2,width:()=>document.documentElement.clientWidth}}).loadData({styles:[{bgcolor:"#f4f5f8",textwrap:!0,color:"#900b09",border:{top:["thin","#0366d6"],bottom:["thin","#0366d6"],right:["thin","#0366d6"],left:["thin","#0366d6"]}}],rows:M.value}).change(u=>{y.value=ne(u),d("data")}))},W=o(),te=async u=>{const e=u.file,c=new FileReader;c.onload=n=>{try{if(!n.target)return;const v=n.target.result,f=ie(v,{type:"binary"});let p=0,w=[],h=[];for(let _ in f.Sheets){if(p>0)continue;const x=ue.sheet_to_json(f.Sheets[_],{header:["0","1"]});if(x.length!=0){for(let g in x)if(x[g]!=null){let b=x;w.push(b[g][0]),h.push(b[g][1])}p++}}V.value=w,C.value=h,y.value=G([V.value,C.value]),d("data"),M.value=q([V,C])}catch(v){console.log("error"),console.log(v)}},c.readAsArrayBuffer(e)},le=u=>{D.value.clearFiles();const e=u[0];e.uid=pe(),D.value.handleStart(e),D.value.submit()};return me(()=>{y.value=G([V.value,C.value]),B.value=document.getElementById("main"),d("size"),H(),M.value=q([V,C])}),(u,e)=>{const c=r("el-input-number"),n=r("el-text"),v=r("el-button"),f=r("el-radio"),p=r("el-radio-group"),w=r("el-upload"),h=r("el-tooltip"),_=r("el-collapse-item"),x=r("el-radio-button"),g=r("el-divider"),b=r("el-switch"),N=r("el-input"),ae=r("el-collapse"),oe=r("el-drawer");return ve(),fe("div",ge,[t(de,{title:L.title},null,8,["title"]),i("div",be,[i("div",Ve,[i("div",Ce,[t(c,{modelValue:O.value,"onUpdate:modelValue":e[0]||(e[0]=l=>O.value=l),min:1,max:100,step:5,onChange:e[1]||(e[1]=l=>d("scale")),"step-strictly":""},null,8,["modelValue"]),t(n,null,{default:a(()=>[s("缩放：")]),_:1})]),ye]),i("div",ke,[i("div",Se,[t(v,{class:"w-full mb-3",type:"primary",size:"large",onClick:Z},{default:a(()=>[s("下载图表")]),_:1}),i("div",De,[t(n,null,{default:a(()=>[s("文件类型")]),_:1}),t(p,{modelValue:P.value,"onUpdate:modelValue":e[2]||(e[2]=l=>P.value=l),class:"ml-4"},{default:a(()=>[t(f,{size:"large",label:"1"},{default:a(()=>[s("PNG")]),_:1}),t(f,{size:"large",label:"2"},{default:a(()=>[s("JPEG")]),_:1})]),_:1},8,["modelValue"])]),i("div",Ue,[t(h,{class:"box-item",effect:"dark",content:"支持上传：xls, xlsx, csv文件",placement:"top-start"},{default:a(()=>[t(v,{class:"w-1/2"},{default:a(()=>[t(w,{"file-list":W.value,"onUpdate:fileList":e[3]||(e[3]=l=>W.value=l),class:"dataFileRef flex",ref_key:"dataFileRef",ref:D,accept:".xls,.xlsx,.csv","http-request":te,"on-exceed":le,limit:1},{default:a(()=>[s(" 上传数据 ")]),_:1},8,["file-list"])]),_:1})]),_:1}),t(v,{class:"w-1/2",onClick:ee},{default:a(()=>[s("编辑数据")]),_:1})])]),t(ae,{modelValue:j.value,"onUpdate:modelValue":e[22]||(e[22]=l=>j.value=l),onChange:K,accordion:""},{default:a(()=>[t(_,{title:"画布设置",name:"1"},{default:a(()=>[i("div",Ee,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("宽度")]),_:1}),t(c,{modelValue:U.value,"onUpdate:modelValue":e[4]||(e[4]=l=>U.value=l),min:1,max:4e3,step:10,"controls-position":"right",class:"h-8 w-60 max-w-[60%] ml-3",onChange:e[5]||(e[5]=l=>d("size"))},null,8,["modelValue"])]),i("div",Te,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("高度")]),_:1}),t(c,{modelValue:E.value,"onUpdate:modelValue":e[6]||(e[6]=l=>E.value=l),min:1,max:4e3,step:10,"controls-position":"right",class:"h-8 w-60 max-w-[60%] ml-3",onChange:e[7]||(e[7]=l=>d("size"))},null,8,["modelValue"])])]),_:1}),t(_,{title:"标题设置",name:"2"},{default:a(()=>[i("div",$e,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("位置")]),_:1}),t(p,{modelValue:T.value,"onUpdate:modelValue":e[8]||(e[8]=l=>T.value=l),class:"ml-3",onChange:e[9]||(e[9]=l=>d("title"))},{default:a(()=>[t(x,{label:"left",value:"left"},{default:a(()=>[s("左")]),_:1}),t(x,{label:"center",value:"center"},{default:a(()=>[s("中")]),_:1}),t(x,{label:"right",value:"right"},{default:a(()=>[s("右")]),_:1})]),_:1},8,["modelValue"])]),t(g,{"content-position":"left",class:"pl-10"},{default:a(()=>[s("标题")]),_:1}),i("div",ze,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("显示")]),_:1}),t(b,{modelValue:A.value,"onUpdate:modelValue":e[10]||(e[10]=l=>A.value=l),class:"ml-3",onChange:e[11]||(e[11]=l=>d("title"))},null,8,["modelValue"])]),i("div",Be,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("标题")]),_:1}),t(N,{class:"h-8 w-60 max-w-[60%] ml-3",modelValue:$.value,"onUpdate:modelValue":e[12]||(e[12]=l=>$.value=l),onBlur:e[13]||(e[13]=l=>d("title"))},null,8,["modelValue"])]),t(g,{"content-position":"left"},{default:a(()=>[s("副标题")]),_:1}),i("div",Oe,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("显示")]),_:1}),t(b,{modelValue:I.value,"onUpdate:modelValue":e[14]||(e[14]=l=>I.value=l),class:"ml-3",onChange:e[15]||(e[15]=l=>d("title"))},null,8,["modelValue"])]),i("div",Pe,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("副标题")]),_:1}),t(N,{class:"h-8 w-60 max-w-[60%] ml-3",modelValue:z.value,"onUpdate:modelValue":e[16]||(e[16]=l=>z.value=l),onBlur:e[17]||(e[17]=l=>d("title"))},null,8,["modelValue"])])]),_:1}),t(_,{title:"水印设置",name:"4"},{default:a(()=>[i("div",Ae,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("显示")]),_:1}),t(b,{modelValue:F.value,"onUpdate:modelValue":e[18]||(e[18]=l=>F.value=l),class:"ml-3",onChange:e[19]||(e[19]=l=>d("watermark"))},null,8,["modelValue"])]),i("div",Ie,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("水印内容")]),_:1}),t(N,{class:"h-8 w-60 max-w-[60%] ml-3",modelValue:R.value,"onUpdate:modelValue":e[20]||(e[20]=l=>R.value=l),onChange:e[21]||(e[21]=l=>d("watermark"))},null,8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])])]),t(oe,{id:"x-spreadsheet",modelValue:k.value,"onUpdate:modelValue":e[23]||(e[23]=l=>k.value=l),direction:"btt","custom-class":"sheet",style:{}},null,8,["modelValue"])])}}});const je=he(Fe,[["__scopeId","data-v-8ba35757"],["__file","D:/3code/14H5/tools-vue-ts/src/components/Tools/Chart/Pie/Pie.vue"]]);export{je as default};
