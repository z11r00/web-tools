import{D as V}from"./DetailHeader-47695dd5.js";import{d as D,l as L,M as _,B as R,C as N,o as U,r as f,b as d,c as r,h as n,f as c,w as p,i as h,U as B,F as E,e as M,J as H,O as S,_ as T}from"./index-17477c0a.js";const $={class:"flex flex-col mt-3 flex-1"},z={class:"p-4 rounded-2xl bg-white"},q={class:"flex mt-3"},A={class:"flex"},J={key:0,class:"mt-3 min-h-md bg-gray-100 p-3 mb-3 flex flex-col"},O={class:"mb-3"},W=["src"],j=["src"],G={key:1},K=D({__name:"ImgCut",setup(P){const C=L({title:"图片切割"}),x=_(),s=_(3),i=_({}),y=_([]),v=_(),F=async t=>{let e=new FileReader;e.readAsDataURL(t.file),e.addEventListener("load",async()=>{const l=new Image;l.onload=()=>{i.value=l,w()},l.src=e.result},!1)},I=t=>{v.value.clearFiles();const e=t[0];e.uid=S(),v.value.handleStart(e),v.value.submit()},w=()=>{const t=document.createElement("canvas"),e=t.getContext("2d"),l=i.value,u=Math.floor(l.naturalWidth/s.value),o=Math.floor(l.naturalHeight/s.value),g=[];t.width=u,t.height=o;for(let m=0;m<s.value;m++)for(let a=0;a<s.value;a++)e==null||e.drawImage(l,a*u,m*o,u,o,0,0,u,o),g.push(t.toDataURL());y.value=g},b=R(()=>{const t=`width: ${i.value.width||800}px;`,e=`grid: repeat(${s.value}, 1fr) / repeat(${s.value}, 1fr);`;return t+e});return N(b,()=>{x.value&&w()}),U(()=>{}),(t,e)=>{const l=f("el-button"),u=f("el-upload"),o=f("el-text"),g=f("el-input-number"),m=f("el-empty");return d(),r("div",$,[n(V,{title:C.title},null,8,["title"]),c("div",z,[n(u,{"file-list":x.value,"onUpdate:fileList":e[0]||(e[0]=a=>x.value=a),class:"dataFileRef flex",ref_key:"dataFileRef",ref:v,accept:"image/*","http-request":F,"on-exceed":I,limit:1},{default:p(()=>[n(l,{type:"primary"},{default:p(()=>[h("请上传需要切割的图片")]),_:1})]),_:1},8,["file-list"]),c("div",q,[c("div",A,[n(o,null,{default:p(()=>[h("行数和列数")]),_:1}),n(g,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value=a),min:1,max:10,class:"ml-3"},null,8,["modelValue"])])]),i.value.src?(d(),r("div",J,[c("div",O,[n(o,null,{default:p(()=>[h("预览: ")]),_:1}),c("div",{style:B(b.value),class:"grid gap-1 max-w-full"},[(d(!0),r(E,null,M(y.value,(a,k)=>(d(),r("img",{key:k,src:a,alt:"结果"},null,8,W))),128))],4)]),c("div",null,[n(o,null,{default:p(()=>[h("原图: ")]),_:1}),c("div",null,[i.value.src?(d(),r("img",{key:0,src:i.value.src,alt:"原图"},null,8,j)):H("",!0)])])])):(d(),r("div",G,[n(m,{"image-size":200,description:"无预览"})]))])])}}}),Y=T(K,[["__file","D:/3code/14H5/tools-vue-ts/src/components/Tools/ImgCut/ImgCut.vue"]]);export{Y as default};
