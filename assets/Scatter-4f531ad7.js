import{b as q,t as J,i as ne,S as L,a as ue,r as ie,u as de}from"./xlsx-20bc10ae.js";import{D as re}from"./DetailHeader-47695dd5.js";import{d as ce,l as me,M as o,o as ve,r,b as fe,c as pe,h as t,f as u,w as a,i as s,O as _e,p as xe,k as he,_ as we}from"./index-17477c0a.js";const ge=y=>(xe("data-v-7e354749"),y=y(),he(),y),be={class:"flex flex-col mt-3 flex-1"},Ve={class:"p-4 rounded-2xl flex"},Ce={class:"w-4/6"},ke={class:"flex flex-row-reverse mb-4"},ye=ge(()=>u("div",{class:"flex justify-center items-center max-h-[500px] max-w-[1000px] overflow-auto"},[u("div",{id:"main",class:"bg-white"})],-1)),Se={class:"w-2/6 bg-white ml-3 rounded-lg p-3"},Ue={class:"mb-3"},De={class:"flex items-center ml-1"},$e={class:"flex w-full"},ze={class:"flex"},Te={class:"flex mt-3"},Be={class:"flex"},Ee={class:"flex"},Oe={class:"flex"},Ae={class:"flex"},Ie={class:"flex"},Fe={class:"flex"},Re={class:"flex"},Me={class:"flex"},Ne=ce({__name:"Scatter",setup(y){const Y=me({title:"散点图"}),E=o(),m=o(),S=o(),P=o(1),O=o(100),U=o(720),D=o(400),A=o("1"),I=o("#5470c6"),$=o("center"),z=o("Tools-Web"),T=o("在线图表制作工具"),F=o(!0),R=o(!0),M=o(!1),N=o("Tools-Web"),K=()=>{let i=document.createElement("canvas"),e=i.getContext("2d");return i.width=i.height=100,e.textAlign="center",e.textBaseline="middle",e.globalAlpha=.08,e.font="20px Microsoft Yahei",e.translate(50,50),e.rotate(-Math.PI/4),e.fillText(N.value,0,0),i},d=i=>{var c,n,v,p,_;let e=E.value;switch(i){case"scale":let b=O.value/100;e.style.transform=`scale(${b})`;break;case"size":e.style.width=U.value+"px",e.style.height=D.value+"px",W();break;case"title":let h="",f="";F.value===!0&&(h=z.value),R.value===!0&&(f=T.value),(c=m.value)==null||c.setOption({title:{text:h,subtext:f,left:$.value}});break;case"color":(n=m.value)==null||n.setOption({series:[{itemStyle:{color:I.value}}]});break;case"watermark":M.value===!0?(v=m.value)==null||v.setOption({backgroundColor:{image:K()}}):(p=m.value)==null||p.setOption({backgroundColor:"#fff"});break;case"data":(_=m.value)==null||_.setOption({series:[{data:B.value}]});break}},Q=()=>{},w=o([10,8.07,13,9.05,11,14,13.4,10,14,12.5,9.15,11.5,3.03,12.2,2.02,1.05,4.05,6.03,12,7.08,5.02,6.03]),g=o([8.04,6.95,7.58,8.81,8.33,7.66,6.81,6.33,8.96,6.82,7.2,7.2,4.23,7.83,4.47,3.33,4.96,7.24,6.26,8.84,5.82,5.68,7.05]),B=o([]),X={backgroundColor:"#fff",title:{text:z.value,subtext:T.value,left:$.value},xAxis:{},yAxis:{},series:[{type:"scatter",symbolSize:30,data:B.value}],tooltip:{}},W=()=>{m.value=ne(E.value),m.value.clear(),m.value.resize({width:U.value,height:D.value}),m.value.setOption(X),d("data")},Z=()=>{var n;let i=A.value=="1"?"png":"jpeg",e=(n=m.value)==null?void 0:n.getDataURL({type:i,pixelRatio:2});if(e!=null){var c=document.createElement("a");c.href=e,c.download="echart."+i,c.click()}},k=o(!1),j=o({}),ee=()=>{k.value==!0?k.value=!1:(k.value=!0,L.locale("zh-cn",window.x_spreadsheet.$messages["zh-cn"]),new L("#x-spreadsheet",{showToolbar:!1,showBottomBar:!1,view:{height:()=>document.documentElement.clientHeight/2,width:()=>document.documentElement.clientWidth}}).loadData({styles:[{bgcolor:"#f4f5f8",textwrap:!0,color:"#900b09",border:{top:["thin","#0366d6"],bottom:["thin","#0366d6"],right:["thin","#0366d6"],left:["thin","#0366d6"]}}],rows:j.value}).change(i=>{let e=ue(i);w.value=e[0],g.value=e[1],d("data")}))},G=o(),te=async i=>{const e=i.file,c=new FileReader;c.onload=n=>{try{if(!n.target)return;const v=n.target.result,p=ie(v,{type:"binary"});let _=0,b=[],h=[];for(let f in p.Sheets){if(_>0)continue;const x=de.sheet_to_json(p.Sheets[f],{header:["0","1"]});if(x.length!=0){for(let V in x)if(x[V]!=null){let C=x;b.push(C[V][0]),h.push(C[V][1])}_++}}w.value=b,g.value=h,B.value=q([w.value,g.value]),d("data"),j.value=J([w,g])}catch(v){console.log("error"),console.log(v)}},c.readAsArrayBuffer(e)},le=i=>{S.value.clearFiles();const e=i[0];e.uid=_e(),S.value.handleStart(e),S.value.submit()};return ve(()=>{B.value=q([w.value,g.value],"toCoord"),E.value=document.getElementById("main"),d("size"),W(),j.value=J([w,g])}),(i,e)=>{const c=r("el-input-number"),n=r("el-text"),v=r("el-button"),p=r("el-radio"),_=r("el-radio-group"),b=r("el-upload"),h=r("el-tooltip"),f=r("el-collapse-item"),x=r("el-radio-button"),V=r("el-divider"),C=r("el-switch"),H=r("el-input"),ae=r("el-color-picker"),oe=r("el-collapse"),se=r("el-drawer");return fe(),pe("div",be,[t(re,{title:Y.title},null,8,["title"]),u("div",Ve,[u("div",Ce,[u("div",ke,[t(c,{modelValue:O.value,"onUpdate:modelValue":e[0]||(e[0]=l=>O.value=l),min:1,max:100,step:5,onChange:e[1]||(e[1]=l=>d("scale")),"step-strictly":""},null,8,["modelValue"]),t(n,null,{default:a(()=>[s("缩放：")]),_:1})]),ye]),u("div",Se,[u("div",Ue,[t(v,{class:"w-full mb-3",type:"primary",size:"large",onClick:Z},{default:a(()=>[s("下载图表")]),_:1}),u("div",De,[t(n,null,{default:a(()=>[s("文件类型")]),_:1}),t(_,{modelValue:A.value,"onUpdate:modelValue":e[2]||(e[2]=l=>A.value=l),class:"ml-4"},{default:a(()=>[t(p,{size:"large",label:"1"},{default:a(()=>[s("PNG")]),_:1}),t(p,{size:"large",label:"2"},{default:a(()=>[s("JPEG")]),_:1})]),_:1},8,["modelValue"])]),u("div",$e,[t(h,{class:"box-item",effect:"dark",content:"支持上传：xls, xlsx, csv文件",placement:"top-start"},{default:a(()=>[t(v,{class:"w-1/2"},{default:a(()=>[t(b,{"file-list":G.value,"onUpdate:fileList":e[3]||(e[3]=l=>G.value=l),class:"dataFileRef flex",ref_key:"dataFileRef",ref:S,accept:".xls,.xlsx,.csv","http-request":te,"on-exceed":le,limit:1},{default:a(()=>[s(" 上传数据 ")]),_:1},8,["file-list"])]),_:1})]),_:1}),t(v,{class:"w-1/2",onClick:ee},{default:a(()=>[s("编辑数据")]),_:1})])]),t(oe,{modelValue:P.value,"onUpdate:modelValue":e[24]||(e[24]=l=>P.value=l),onChange:Q,accordion:""},{default:a(()=>[t(f,{title:"画布设置",name:"1"},{default:a(()=>[u("div",ze,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("宽度")]),_:1}),t(c,{modelValue:U.value,"onUpdate:modelValue":e[4]||(e[4]=l=>U.value=l),min:1,max:4e3,step:10,"controls-position":"right",class:"h-8 w-60 max-w-[60%] ml-3",onChange:e[5]||(e[5]=l=>d("size"))},null,8,["modelValue"])]),u("div",Te,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("高度")]),_:1}),t(c,{modelValue:D.value,"onUpdate:modelValue":e[6]||(e[6]=l=>D.value=l),min:1,max:4e3,step:10,"controls-position":"right",class:"h-8 w-60 max-w-[60%] ml-3",onChange:e[7]||(e[7]=l=>d("size"))},null,8,["modelValue"])])]),_:1}),t(f,{title:"标题设置",name:"2"},{default:a(()=>[u("div",Be,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("位置")]),_:1}),t(_,{modelValue:$.value,"onUpdate:modelValue":e[8]||(e[8]=l=>$.value=l),class:"ml-3",onChange:e[9]||(e[9]=l=>d("title"))},{default:a(()=>[t(x,{label:"left",value:"left"},{default:a(()=>[s("左")]),_:1}),t(x,{label:"center",value:"center"},{default:a(()=>[s("中")]),_:1}),t(x,{label:"right",value:"right"},{default:a(()=>[s("右")]),_:1})]),_:1},8,["modelValue"])]),t(V,{"content-position":"left",class:"pl-10"},{default:a(()=>[s("标题")]),_:1}),u("div",Ee,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("显示")]),_:1}),t(C,{modelValue:F.value,"onUpdate:modelValue":e[10]||(e[10]=l=>F.value=l),class:"ml-3",onChange:e[11]||(e[11]=l=>d("title"))},null,8,["modelValue"])]),u("div",Oe,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("标题")]),_:1}),t(H,{class:"h-8 w-60 max-w-[60%] ml-3",modelValue:z.value,"onUpdate:modelValue":e[12]||(e[12]=l=>z.value=l),onBlur:e[13]||(e[13]=l=>d("title"))},null,8,["modelValue"])]),t(V,{"content-position":"left"},{default:a(()=>[s("副标题")]),_:1}),u("div",Ae,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("显示")]),_:1}),t(C,{modelValue:R.value,"onUpdate:modelValue":e[14]||(e[14]=l=>R.value=l),class:"ml-3",onChange:e[15]||(e[15]=l=>d("title"))},null,8,["modelValue"])]),u("div",Ie,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("副标题")]),_:1}),t(H,{class:"h-8 w-60 max-w-[60%] ml-3",modelValue:T.value,"onUpdate:modelValue":e[16]||(e[16]=l=>T.value=l),onBlur:e[17]||(e[17]=l=>d("title"))},null,8,["modelValue"])])]),_:1}),t(f,{title:"图形属性",name:"3"},{default:a(()=>[u("div",Fe,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("颜色")]),_:1}),t(ae,{modelValue:I.value,"onUpdate:modelValue":e[18]||(e[18]=l=>I.value=l),class:"ml-3",onChange:e[19]||(e[19]=l=>d("color"))},null,8,["modelValue"])])]),_:1}),t(f,{title:"水印设置",name:"4"},{default:a(()=>[u("div",Re,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("显示")]),_:1}),t(C,{modelValue:M.value,"onUpdate:modelValue":e[20]||(e[20]=l=>M.value=l),class:"ml-3",onChange:e[21]||(e[21]=l=>d("watermark"))},null,8,["modelValue"])]),u("div",Me,[t(n,{class:"w-16 text-right"},{default:a(()=>[s("水印内容")]),_:1}),t(H,{class:"h-8 w-60 max-w-[60%] ml-3",modelValue:N.value,"onUpdate:modelValue":e[22]||(e[22]=l=>N.value=l),onChange:e[23]||(e[23]=l=>d("watermark"))},null,8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])])]),t(se,{id:"x-spreadsheet",modelValue:k.value,"onUpdate:modelValue":e[25]||(e[25]=l=>k.value=l),direction:"btt","custom-class":"sheet",style:{}},null,8,["modelValue"])])}}});const We=we(Ne,[["__scopeId","data-v-7e354749"],["__file","D:/3code/14H5/tools-vue-ts/src/components/Tools/Chart/Scatter/Scatter.vue"]]);export{We as default};
